---
import { Icon } from 'astro-icon/components'
---

<button
	id="themeToggle"
	class="focus-outline"
	title="Toggles light & dark"
	aria-label="auto"
	aria-live="polite"
>
	<Icon name="heroicons:moon" id="moon-svg" class="inline-block size-7" />
	<Icon name="heroicons:sun" id="sun-svg" class="inline-block size-7" />
</button>
<script is:inline>
	document.addEventListener('astro:page-load', () => {
		const handleToggleClick = () => {
			const element = document.documentElement
			element.classList.toggle('dark')

			const isDark = element.classList.contains('dark')
			localStorage.setItem('theme', isDark ? 'dark' : 'light')
		}
		document
			.getElementById('themeToggle')
			.addEventListener('click', handleToggleClick)
	})
</script>
<style>
	#sun-svg,
	html.dark #moon-svg,
	html[data-theme='dark'] #moon-svg {
		display: block;
	}
	#moon-svg,
	html.dark #sun-svg,
	html[data-theme='dark'] #sun-svg {
		display: none;
	}
	#theme-btn svg {
		@apply transition-all duration-75 hover:rotate-12;
	}
</style>

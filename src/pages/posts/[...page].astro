---
// https://docs.astro.build/en/guides/content-collections/#generating-routes-from-content

import { type GetStaticPaths, type Page } from "astro"
import { type CollectionEntry, getCollection } from "astro:content"

import Pagination from "@/components/Pagination.astro"
import Layout from "@/components/Layout.astro"
import { formatDate } from "@/utils/content"

export const getStaticPaths: GetStaticPaths = async ({ paginate }) => {
	const posts = await getCollection("posts")

	return paginate(posts, { pageSize: 2 })
}

interface Props {
	page: Page<CollectionEntry<"posts">>
}

const { page } = Astro.props
---

<Layout seo={{ title: "Posts", description: "Collection of posts" }}>
	<h1 class="my-4 font-heading text-2xl font-bold">Posts</h1>
	<!-- <div class="grid grid-cols-1 gap-4"> -->
	<ul>
		{
			page.data.map((post) => (
				<li>
					{formatDate(post.data.date)}
					<a href={`/posts/${post.slug}`}>{post.data.title}</a>
				</li>
				// cover={post.data.image}>
				// {post.data.description}
			))
		}
	</ul>
	<Pagination {page} />
</Layout>
